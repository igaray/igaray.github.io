<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Global Site Tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-59055167-2"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments)};
          gtag('js', new Date());

          gtag('config', 'UA-59055167-2');
        </script>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://notes.shichao.io/ruby/">
        <link rel="shortcut icon" href="../toki_32.png">
        

	<title>Ruby - Shichao's Notes</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,400italic,500,600" rel="stylesheet">
        <link href="../custom.css" rel="stylesheet">
        <link href="../friendly.css" rel="stylesheet">
        <link href="../theme.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">Shichao's Notes</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">APUE <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../apue/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch1/">Chapter 1. UNIX System Overview</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch2/">Chapter 2. UNIX Standardization and Implementations</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch3/">Chapter 3. File I/O</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch4/">Chapter 4. Files and Directories</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch5/">Chapter 5. Standard I/O Library</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch6/">Chapter 6. System Data Files and Information</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch7/">Chapter 7. Process Environment</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch8/">Chapter 8. Process Control</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch9/">Chapter 9. Process Relationships</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch10/">Chapter 10. Signals</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch11/">Chapter 11. Threads</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch12/">Chapter 12. Thread Control</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch13/">Chapter 13. Daemon Processes</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch14/">Chapter 14. Advanced I/O</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch15/">Chapter 15. Interprocess Communication</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch16/">Chapter 16. Network IPC: Sockets</a>
                        </li>
                      
                        <li>
                            <a href="../apue/ch17/">Chapter 17. Advanced IPC</a>
                        </li>
                      
                    </ul>
                </li>
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">UNP <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../unp/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../unp/ch1/">Chapter 1. Introduction</a>
                        </li>
                      
                        <li>
                            <a href="../unp/ch2/">Chapter 2. The Transport Layer: TCP, UDP, and SCTP</a>
                        </li>
                      
                        <li>
                            <a href="../unp/ch3/">Chapter 3. Sockets Introduction</a>
                        </li>
                      
                        <li>
                            <a href="../unp/ch4/">Chapter 4. Elementary TCP Sockets</a>
                        </li>
                      
                        <li>
                            <a href="../unp/ch5/">Chapter 5. TCP Client/Server Example</a>
                        </li>
                      
                        <li>
                            <a href="../unp/ch6/">Chapter 6. I/O Multiplexing: The select and poll Functions</a>
                        </li>
                      
                        <li>
                            <a href="../unp/ch7/">Chapter 7. Socket Options</a>
                        </li>
                      
                        <li>
                            <a href="../unp/ch8/">Chapter 8. Elementary UDP Sockets</a>
                        </li>
                      
                    </ul>
                </li>
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">TCPv1 <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../tcpv1/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch1/">Chapter 1. Introduction</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch2/">Chapter 2. The Internet Address Architecture</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch3/">Chapter 3. Link Layer</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch4/">Chapter 4. ARP: Address Resolution Protocol</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch5/">Chapter 5. The Internet Protocol (IP)</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch6/">Chapter 6. System Configuration: DHCP and Autoconfiguration</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch7/">Chapter 7. Firewalls and Network Address Translation (NAT)</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch8/">Chapter 8. ICMPv4 and ICMPv6: Internet Control Message Protocol</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch9/">Chapter 9. Broadcasting and Local Multicasting (IGMP and MLD)</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch10/">Chapter 10. User Datagram Protocol (UDP) and IP Fragmentation</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch11/">Chapter 11. Name Resolution and the Domain Name System (DNS)</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch12/">Chapter 12. TCP: The Transmission Control Protocol (Preliminaries)</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch13/">Chapter 13. TCP Connection Management</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch14/">Chapter 14. TCP Timeout and Retransmission</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch15/">Chapter 15. TCP Data Flow and Window Management</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch16/">Chapter 16. TCP Congestion Control</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch17/">Chapter 17. TCP Keepalive</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/ch18/">Chapter 18. Security: EAP, IPsec, TLS, DNSSEC, and DKIM</a>
                        </li>
                      
                        <li>
                            <a href="../tcpv1/headers/">Headers</a>
                        </li>
                      
                    </ul>
                </li>
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">GOPL <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../gopl/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch1/">Chapter 1. Tutorial</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch2/">Chapter 2. Program Structure</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch3/">Chapter 3. Basic Data Types</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch4/">Chapter 4. Composite Types</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch5/">Chapter 5. Functions</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch6/">Chapter 6. Methods</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch7/">Chapter 7. Interfaces</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch8/">Chapter 8. Goroutines and Channels</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch9/">Chapter 9. Concurrency with Shared Variables</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch10/">Chapter 10. Packages and the Go Tool</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch11/">Chapter 11. Testing</a>
                        </li>
                      
                        <li>
                            <a href="../gopl/ch12/">Chapter 12. Reflection</a>
                        </li>
                      
                    </ul>
                </li>
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">CSN <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../csn/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../csn/part1/">Part 1: Language</a>
                        </li>
                      
                        <li>
                            <a href="../csn/part2/">Part 2: Advanced</a>
                        </li>
                      
                    </ul>
                </li>
            <li>
                    <a href="../toc/">TOC</a>
                </li>
            </ul>
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    
                        <a href="https://github.com/shichao-an/notes/blob/master/docs/ruby/index.md">
                    
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#ruby">Ruby</a></li>
        
    
        <li class="main "><a href="#oo-language">OO Language</a></li>
        
            <li><a href="#ruby-is-an-object-oriented-language">Ruby Is an Object-Oriented Language</a></li>
        
            <li><a href="#some-basic-ruby">Some Basic Ruby</a></li>
        
            <li><a href="#arrays-and-hashes">Arrays and Hashes</a></li>
        
            <li><a href="#symbols">Symbols</a></li>
        
    
        <li class="main "><a href="#references">References</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">
              

<h3 id="ruby"><strong>Ruby</strong><a class="headerlink" href="#ruby" title="Permanent link">&para;</a></h3>
<h3 id="oo-language">OO Language<a class="headerlink" href="#oo-language" title="Permanent link">&para;</a></h3>
<h4 id="ruby-is-an-object-oriented-language">Ruby Is an Object-Oriented Language<a class="headerlink" href="#ruby-is-an-object-oriented-language" title="Permanent link">&para;</a></h4>
<p>In Ruby, you’d define a <strong>class</strong> to represent entities. With classes, you’ll typically want to create a number of <strong>instances</strong> of each. The word <strong>object</strong> is used interchangeably with <strong>class instance</strong>.</p>
<p>These objects are created by calling a <strong>constructor</strong>, a special method associated with a class. The standard constructor is called <code>new</code>.</p>
<div class="codehilite"><pre><span class="n">song1</span> <span class="o">=</span> <span class="no">Song</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Ruby Tuesday&quot;</span><span class="p">)</span>
<span class="n">song2</span> <span class="o">=</span> <span class="no">Song</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Enveloped in Python&quot;</span><span class="p">)</span>
<span class="c1"># and so on</span>
</pre></div>


<p>These instances are both derived from the same class, but they have unique characteristics:</p>
<ol>
<li>Every object has a unique <strong>object identifier</strong> (abbreviated as <strong>object ID</strong>).</li>
<li>You can define instance variables, variables with values that are unique to each instance.</li>
</ol>
<p>Within each class, you can define <strong>instance methods</strong>. These instance methods have access to the object’s instance variables and hence to the object’s state.</p>
<p>Methods are invoked by sending a message to an object. The message contains the method’s name, along with any parameters the method may need. When an object receives a message, it looks into its own class for a corresponding method (and execute it if it exists).</p>
<p>It’s worth noting here a major difference between Ruby and most other languages. For example, Java, you’d find the absolute value of some number by calling a separate function and passing in that number, like:</p>
<div class="codehilite"><pre><span class="n">num</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">num</span><span class="o">)</span> <span class="c1">// Java code</span>
</pre></div>


<p>In Ruby, the ability to determine an absolute value is built into numbers: they take care of the details internally. You simply send the message abs to a number object and let it do the work:</p>
<div class="codehilite"><pre><span class="n">num</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1234</span> <span class="c1"># =&gt; -1234</span>
<span class="n">positive</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="n">abs</span> <span class="c1"># =&gt; 1234</span>
</pre></div>


<h4 id="some-basic-ruby">Some Basic Ruby<a class="headerlink" href="#some-basic-ruby" title="Permanent link">&para;</a></h4>
<ul>
<li>Methods are defined with the keyword def, followed by the method name and the method’s parameters between parentheses (parentheses are optional). Ruby doesn’t use braces to delimit the bodies of compound statements and definitions. Instead, you simply finish the body with the keyword <code>end</code>.</li>
<li>The most common way to create a string is to use <strong>string literals</strong>, which are sequences of characters between single or double quotation marks.<ul>
<li>Single-quoted: with a few exceptions, what you enter in the string literal becomes the string’s value.</li>
<li>Double-quoted:<ul>
<li>Substitutions: sequences that start with a backslash character are replaced with some binary value.</li>
<li>Expression interpolation: the sequence <code>#{expression}</code> is replaced by the value of <code>expression</code>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Ruby uses a convention for names that may seem strange at first: the first characters of a name indicate
how the name is used.</p>
<ol>
<li>Local variables, method parameters, and method names should all start with a lowercase letter or an underscore (non-ASCII characters are assumed to be lowercase letters).</li>
<li>Global variables are prefixed with a dollar sign (<code>$</code>)</li>
<li>Instance variables begin with an "at" sign (<code>@</code>).</li>
<li>Class variables start with two "at" signs (<code>@@</code>).</li>
<li>Class names, module names, and constants must start with an uppercase letter.</li>
</ol>
<p>By convention, multiword instance variables are written with underscores between the words, and multiword class names are written in <code>MixedCase</code> (with each word capitalized). Method names may end with the characters <code>?</code>, <code>!</code>, and <code>=</code>.</p>
<p>The following table is an example of variable, class, and constant names:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Local Variable</td>
<td><code>name</code> <code>fish_and_chips</code> <code>x_axis</code> <code>thx1138</code> <code>_x</code> <code>_26</code></td>
</tr>
<tr>
<td>Instance Variable</td>
<td><code>@name</code> <code>@point_1</code> <code>@X</code> <code>@_</code> <code>@plan9</code></td>
</tr>
<tr>
<td>Class Variable</td>
<td><code>@@total</code> <code>@@symtab</code> <code>@@N</code> <code>@@x_pos</code> <code>@@SINGLE</code></td>
</tr>
<tr>
<td>Global Variable</td>
<td><code>$debug</code> <code>$CUSTOMER</code> <code>$_</code> <code>$plan9</code> <code>$Global</code></td>
</tr>
<tr>
<td>Class Name</td>
<td><code>String</code> <code>ActiveRecord</code> <code>MyClass</code></td>
</tr>
<tr>
<td>Constant Name</td>
<td><code>FEET_PER_MILE</code> <code>DEBUG</code></td>
</tr>
</tbody>
</table>
<h4 id="arrays-and-hashes">Arrays and Hashes<a class="headerlink" href="#arrays-and-hashes" title="Permanent link">&para;</a></h4>
<p>Two ways to create and initialize a new array object using an <strong>array literal</strong>:</p>
<div class="codehilite"><pre><span class="n">a</span> <span class="o">=</span> <span class="o">[</span> <span class="s1">&#39;ant&#39;</span><span class="p">,</span> <span class="s1">&#39;bee&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;elk&#39;</span> <span class="o">]</span>
<span class="c1"># this is the same:</span>
<span class="n">a</span> <span class="o">=</span> <span class="sx">%w{ ant bee cat dog elk }</span>
</pre></div>


<p>In many languages, the concept of <code>nil</code> (or null) means "no object". In Ruby, however, <code>nil</code> is an object that happens to represent nothing.</p>
<p>Ruby hashes are similar to arrays. A hash literal uses braces rather than square brackets. The literal must supply two objects for every entry: one for the key, the other for the value, separated by <code>=&gt;</code>:</p>
<div class="codehilite"><pre><span class="n">inst_section</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;cello&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clarinet&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;woodwind&#39;</span><span class="p">,</span>
  <span class="s1">&#39;drum&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;percussion&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>


<p>A hash by default returns <code>nil</code> when indexed by a key it doesn’t contain. To specify a default value (for example, 0) when you create a new, empty hash:</p>
<div class="codehilite"><pre><span class="n">histogram</span> <span class="o">=</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># The default value is zero</span>
<span class="n">histogram</span><span class="o">[</span><span class="s1">&#39;ruby&#39;</span><span class="o">]</span> <span class="c1"># =&gt; 0</span>
</pre></div>


<h4 id="symbols">Symbols<a class="headerlink" href="#symbols" title="Permanent link">&para;</a></h4>
<p>Most of the time, the actual numeric values of these constants are irrelevant (as long as they are unique). In Ruby, <strong>symbols</strong> are simply constant names that you don’t have to predeclare and that are guaranteed to be unique. A symbol literal starts with a colon and is normally followed by some kind of name, like <code>:north</code>, <code>:east</code>. There’s no need to assign some kind of value to a symbol; Ruby takes care of that for you.  Ruby also guarantees that no matter where it appears in your program, a particular symbol will have the same value.</p>
<p>Symbols are frequently used as keys in hashes:</p>
<div class="codehilite"><pre><span class="n">inst_section</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:cello</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
  <span class="ss">:clarinet</span> <span class="o">=&gt;</span> <span class="s1">&#39;woodwind&#39;</span><span class="p">,</span>
  <span class="ss">:drum</span> <span class="o">=&gt;</span> <span class="s1">&#39;percussion&#39;</span>
<span class="p">}</span>
</pre></div>


<p>Symbols are so frequently used as hash keys that Ruby has a shortcut syntax (you can use <code>name: value</code> pairs to create a hash if the keys are symbols):</p>
<div class="codehilite"><pre><span class="n">inst_section</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">cello</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
  <span class="ss">clarinet</span><span class="p">:</span> <span class="s1">&#39;woodwind&#39;</span><span class="p">,</span>
  <span class="ss">drum</span><span class="p">:</span> <span class="s1">&#39;percussion&#39;</span>
<span class="p">}</span>
</pre></div>


<hr />
<h3 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h3>
<ul>
<li>[PR12] <em>Programming Ruby 1.9 &amp; 2.0: The Pragmatic Programmers' Guide</em> (4th Edition)</li>
<li><a href="https://github.com/bbatsov/ruby-style-guide">The Ruby Style Guide</a></li>
</ul>
            </div>
        </div>

        <footer class="col-md-12">
            
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
        <script src="../custom.js"></script>
    </body>
</html>