<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Global Site Tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-59055167-2"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments)};
          gtag('js', new Date());

          gtag('config', 'UA-59055167-2');
        </script>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://notes.shichao.io/tcpv1/ch2/">
        <link rel="shortcut icon" href="../../toki_32.png">
        

	<title>Chapter 2. The Internet Address Architecture - Shichao's Notes</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,400italic,500,600" rel="stylesheet">
        <link href="../../custom.css" rel="stylesheet">
        <link href="../../friendly.css" rel="stylesheet">
        <link href="../../theme.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Shichao's Notes</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">APUE <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../../apue/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch1/">Chapter 1. UNIX System Overview</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch2/">Chapter 2. UNIX Standardization and Implementations</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch3/">Chapter 3. File I/O</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch4/">Chapter 4. Files and Directories</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch5/">Chapter 5. Standard I/O Library</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch6/">Chapter 6. System Data Files and Information</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch7/">Chapter 7. Process Environment</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch8/">Chapter 8. Process Control</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch9/">Chapter 9. Process Relationships</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch10/">Chapter 10. Signals</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch11/">Chapter 11. Threads</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch12/">Chapter 12. Thread Control</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch13/">Chapter 13. Daemon Processes</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch14/">Chapter 14. Advanced I/O</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch15/">Chapter 15. Interprocess Communication</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch16/">Chapter 16. Network IPC: Sockets</a>
                        </li>
                      
                        <li>
                            <a href="../../apue/ch17/">Chapter 17. Advanced IPC</a>
                        </li>
                      
                    </ul>
                </li>
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">UNP <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../../unp/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../../unp/ch1/">Chapter 1. Introduction</a>
                        </li>
                      
                        <li>
                            <a href="../../unp/ch2/">Chapter 2. The Transport Layer: TCP, UDP, and SCTP</a>
                        </li>
                      
                        <li>
                            <a href="../../unp/ch3/">Chapter 3. Sockets Introduction</a>
                        </li>
                      
                        <li>
                            <a href="../../unp/ch4/">Chapter 4. Elementary TCP Sockets</a>
                        </li>
                      
                        <li>
                            <a href="../../unp/ch5/">Chapter 5. TCP Client/Server Example</a>
                        </li>
                      
                        <li>
                            <a href="../../unp/ch6/">Chapter 6. I/O Multiplexing: The select and poll Functions</a>
                        </li>
                      
                        <li>
                            <a href="../../unp/ch7/">Chapter 7. Socket Options</a>
                        </li>
                      
                        <li>
                            <a href="../../unp/ch8/">Chapter 8. Elementary UDP Sockets</a>
                        </li>
                      
                    </ul>
                </li>
            <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">TCPv1 <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../ch1/">Chapter 1. Introduction</a>
                        </li>
                      
                        <li class="active">
                            <a href="./">Chapter 2. The Internet Address Architecture</a>
                        </li>
                      
                        <li>
                            <a href="../ch3/">Chapter 3. Link Layer</a>
                        </li>
                      
                        <li>
                            <a href="../ch4/">Chapter 4. ARP: Address Resolution Protocol</a>
                        </li>
                      
                        <li>
                            <a href="../ch5/">Chapter 5. The Internet Protocol (IP)</a>
                        </li>
                      
                        <li>
                            <a href="../ch6/">Chapter 6. System Configuration: DHCP and Autoconfiguration</a>
                        </li>
                      
                        <li>
                            <a href="../ch7/">Chapter 7. Firewalls and Network Address Translation (NAT)</a>
                        </li>
                      
                        <li>
                            <a href="../ch8/">Chapter 8. ICMPv4 and ICMPv6: Internet Control Message Protocol</a>
                        </li>
                      
                        <li>
                            <a href="../ch9/">Chapter 9. Broadcasting and Local Multicasting (IGMP and MLD)</a>
                        </li>
                      
                        <li>
                            <a href="../ch10/">Chapter 10. User Datagram Protocol (UDP) and IP Fragmentation</a>
                        </li>
                      
                        <li>
                            <a href="../ch11/">Chapter 11. Name Resolution and the Domain Name System (DNS)</a>
                        </li>
                      
                        <li>
                            <a href="../ch12/">Chapter 12. TCP: The Transmission Control Protocol (Preliminaries)</a>
                        </li>
                      
                        <li>
                            <a href="../ch13/">Chapter 13. TCP Connection Management</a>
                        </li>
                      
                        <li>
                            <a href="../ch14/">Chapter 14. TCP Timeout and Retransmission</a>
                        </li>
                      
                        <li>
                            <a href="../ch15/">Chapter 15. TCP Data Flow and Window Management</a>
                        </li>
                      
                        <li>
                            <a href="../ch16/">Chapter 16. TCP Congestion Control</a>
                        </li>
                      
                        <li>
                            <a href="../ch17/">Chapter 17. TCP Keepalive</a>
                        </li>
                      
                        <li>
                            <a href="../ch18/">Chapter 18. Security: EAP, IPsec, TLS, DNSSEC, and DKIM</a>
                        </li>
                      
                        <li>
                            <a href="../headers/">Headers</a>
                        </li>
                      
                    </ul>
                </li>
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">GOPL <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../../gopl/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch1/">Chapter 1. Tutorial</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch2/">Chapter 2. Program Structure</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch3/">Chapter 3. Basic Data Types</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch4/">Chapter 4. Composite Types</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch5/">Chapter 5. Functions</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch6/">Chapter 6. Methods</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch7/">Chapter 7. Interfaces</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch8/">Chapter 8. Goroutines and Channels</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch9/">Chapter 9. Concurrency with Shared Variables</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch10/">Chapter 10. Packages and the Go Tool</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch11/">Chapter 11. Testing</a>
                        </li>
                      
                        <li>
                            <a href="../../gopl/ch12/">Chapter 12. Reflection</a>
                        </li>
                      
                    </ul>
                </li>
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">CSN <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../../csn/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../../csn/part1/">Part 1: Language</a>
                        </li>
                      
                        <li>
                            <a href="../../csn/part2/">Part 2: Advanced</a>
                        </li>
                      
                    </ul>
                </li>
            <li>
                    <a href="../../toc/">TOC</a>
                </li>
            </ul>
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    
                        <a href="https://github.com/shichao-an/notes/blob/master/docs/tcpv1/ch2.md">
                    
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#chapter-2-the-internet-address-architecture">Chapter 2. The Internet Address Architecture</a></li>
        
    
        <li class="main "><a href="#introduction">Introduction</a></li>
        
    
        <li class="main "><a href="#expressing-ip-addresses">Expressing IP Addresses</a></li>
        
    
        <li class="main "><a href="#basic-ip-address-structure">Basic IP Address Structure</a></li>
        
            <li><a href="#classful-addressing">Classful Addressing</a></li>
        
            <li><a href="#subnet-addressing">Subnet Addressing</a></li>
        
            <li><a href="#subnet-masks">Subnet Masks</a></li>
        
            <li><a href="#variable-length-subnet-masks-vlsm">Variable-Length Subnet Masks (VLSM)</a></li>
        
            <li><a href="#broadcast-addresses">Broadcast Addresses</a></li>
        
            <li><a href="#ipv6-addresses-and-interface-identifiers">IPv6 Addresses and Interface Identifiers</a></li>
        
    
        <li class="main "><a href="#cidr-and-aggregation">CIDR and Aggregation</a></li>
        
            <li><a href="#prefixes">Prefixes</a></li>
        
            <li><a href="#aggregation">Aggregation</a></li>
        
    
        <li class="main "><a href="#special-use-addresses">Special-Use Addresses</a></li>
        
            <li><a href="#addressing-ipv4ipv6-translators">Addressing IPv4/IPv6 Translators</a></li>
        
            <li><a href="#multicast-addresses">Multicast Addresses</a></li>
        
            <li><a href="#ipv4-multicast-addresses">IPv4 Multicast Addresses</a></li>
        
            <li><a href="#ipv6-multicast-addresses">IPv6 Multicast Addresses</a></li>
        
            <li><a href="#anycast-addresses">Anycast Addresses</a></li>
        
    
        <li class="main "><a href="#allocation">Allocation</a></li>
        
            <li><a href="#unicast">Unicast</a></li>
        
            <li><a href="#multicast">Multicast</a></li>
        
    
        <li class="main "><a href="#unicast-address-assignment">Unicast Address Assignment</a></li>
        
            <li><a href="#single-providerno-networksingle-address">Single Provider/No Network/Single Address</a></li>
        
            <li><a href="#single-providersingle-networksingle-address">Single Provider/Single Network/Single Address</a></li>
        
            <li><a href="#single-providermultiple-networksmultiple-addresses">Single Provider/Multiple Networks/Multiple Addresses</a></li>
        
            <li><a href="#multiple-providersmultiple-networksmultiple-addresses-multihoming">Multiple Providers/Multiple Networks/Multiple Addresses (Multihoming)</a></li>
        
    
        <li class="main "><a href="#attacks-involving-ip-addresses">Attacks Involving IP Addresses</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">
              

<h3 id="chapter-2-the-internet-address-architecture"><strong>Chapter 2. The Internet Address Architecture</strong><a class="headerlink" href="#chapter-2-the-internet-address-architecture" title="Permanent link">&para;</a></h3>
<h3 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h3>
<p>This chapter deals with the structure of network-layer addresses used in the Internet, the IP addresses. [p31-32]</p>
<ul>
<li>Every device connected to the Internet has at least one IP address.</li>
<li>When devices are attached to the global Internet, they are assigned addresses that must be coordinated so as to not duplicate other addresses in use on the network.</li>
</ul>
<h3 id="expressing-ip-addresses">Expressing IP Addresses<a class="headerlink" href="#expressing-ip-addresses" title="Permanent link">&para;</a></h3>
<p>In IPv4, the dotted-quad notation for IPv4 addresses consists of four decimal numbers separated by periods. For example, 165.195.130.107. Each such number is a nonnegative integer in the range [0, 255] and represents one-quarter of the entire IP address. It is simply a way of writing the whole IPv4 address ( a 32-bit nonnegative integer used throughout the Internet system) using convenient decimal numbers. [p32]</p>
<p>In IPv6, addresses are 128 bits in length, four times larger than IPv4 addresses. The conventional notation for IPv6 addresses is a series of four hexadecimal ("hex" or base-16) numbers called <em>blocks</em> or <em>fields</em> separated by colons. For example, an IPv6 address containing eight blocks would be written as 5f05:2000:80ad:5800:0058:0800:2023:1d71. In addition, a number of agreed-upon simplifications have been standardized for expressing IPv6 addresses:</p>
<ol>
<li>Leading zeros of a block need not be written. In the preceding example, the address could have been written as 5f05:2000:80ad:5800:58:800:2023:1d71.</li>
<li>Blocks of all zeros can be omitted and replaced by the notation ::.<ul>
<li>For example, the IPv6 address 0:0:0:0:0:0:0:1 can be written more compactly as ::1.</li>
<li>Similarly, the address 2001:0db8:0:0:0:0:0:2 can be written more compactly as 2001:db8::2.</li>
<li>To avoid ambiguities, the :: notation may be used only once in an IPv6 address</li>
</ul>
</li>
<li><strong>IPv4-mapped IPv6 address</strong>. The block immediately preceding the IPv4 portion of the address has the value ffff and the remaining part of the address is formatted using dotted-quad. For example, the IPv6 address ::ffff:10.0.0.1 represents the IPv4 address 10.0.0.1. This is called an <strong>IPv4-mapped IPv6 address</strong>.</li>
<li><strong>IPv4-compatible IPv6 address</strong>. The low-order 32 bits of the IPv6 address can be written using dotted-quad notation. The IPv6 address ::0102:f001 is therefore equivalent to the address ::1.2.240.1.</li>
</ol>
<p>The colon delimiter in an IPv6 address may be confused with another separator such as the colon used between an IP address and a port number. In such circumstances, bracket characters, [ and ], are used to surround the IPv6 address. The following URL is an example:</p>
<div class="codehilite"><pre>http://[2001:0db8:85a3:08d3:1319:8a2e:0370:7344]:443/
</pre></div>


<p>The flexibility provided by [RFC4291] resulted in unnecessary confusion due to the ability to represent the same IPv6 address in multiple ways. To remedy this situation, [RFC5952] imposes some rules to narrow the range of options while remaining compatible with [RFC4291]. They are as follows:</p>
<ol>
<li>Leading zeros must be suppressed (e.g., 2001:0db8::0022 becomes 2001:db8::22).</li>
<li>The :: construct must be used to its maximum possible effect (most zeros suppressed) but not for only 16-bit blocks. If multiple blocks contain equallength runs of zeros, the first is replaced with ::.</li>
<li>The hexadecimal digits a through f should be represented in lowercase.</li>
</ol>
<h3 id="basic-ip-address-structure">Basic IP Address Structure<a class="headerlink" href="#basic-ip-address-structure" title="Permanent link">&para;</a></h3>
<p>IPv4 has 2<sup>32</sup> possible addresses and IPv6 has 2<sup>128</sup>.</p>
<ul>
<li>Most of the IPv4 address space is <strong>unicast</strong> address space, which is IPv4 addresses chunks subdivided down to a single address and used to identify a single network interface of a computer attached to the Internet or to some private intranet.</li>
<li>Most of the IPv6 address space is not currently being used.</li>
</ul>
<h4 id="classful-addressing">Classful Addressing<a class="headerlink" href="#classful-addressing" title="Permanent link">&para;</a></h4>
<h4 id="subnet-addressing">Subnet Addressing<a class="headerlink" href="#subnet-addressing" title="Permanent link">&para;</a></h4>
<h4 id="subnet-masks">Subnet Masks<a class="headerlink" href="#subnet-masks" title="Permanent link">&para;</a></h4>
<h4 id="variable-length-subnet-masks-vlsm">Variable-Length Subnet Masks (VLSM)<a class="headerlink" href="#variable-length-subnet-masks-vlsm" title="Permanent link">&para;</a></h4>
<h4 id="broadcast-addresses">Broadcast Addresses<a class="headerlink" href="#broadcast-addresses" title="Permanent link">&para;</a></h4>
<h4 id="ipv6-addresses-and-interface-identifiers">IPv6 Addresses and Interface Identifiers<a class="headerlink" href="#ipv6-addresses-and-interface-identifiers" title="Permanent link">&para;</a></h4>
<h3 id="cidr-and-aggregation">CIDR and Aggregation<a class="headerlink" href="#cidr-and-aggregation" title="Permanent link">&para;</a></h3>
<h4 id="prefixes">Prefixes<a class="headerlink" href="#prefixes" title="Permanent link">&para;</a></h4>
<h4 id="aggregation">Aggregation<a class="headerlink" href="#aggregation" title="Permanent link">&para;</a></h4>
<h3 id="special-use-addresses">Special-Use Addresses<a class="headerlink" href="#special-use-addresses" title="Permanent link">&para;</a></h3>
<h4 id="addressing-ipv4ipv6-translators">Addressing IPv4/IPv6 Translators<a class="headerlink" href="#addressing-ipv4ipv6-translators" title="Permanent link">&para;</a></h4>
<h4 id="multicast-addresses">Multicast Addresses<a class="headerlink" href="#multicast-addresses" title="Permanent link">&para;</a></h4>
<h4 id="ipv4-multicast-addresses">IPv4 Multicast Addresses<a class="headerlink" href="#ipv4-multicast-addresses" title="Permanent link">&para;</a></h4>
<h4 id="ipv6-multicast-addresses">IPv6 Multicast Addresses<a class="headerlink" href="#ipv6-multicast-addresses" title="Permanent link">&para;</a></h4>
<h4 id="anycast-addresses">Anycast Addresses<a class="headerlink" href="#anycast-addresses" title="Permanent link">&para;</a></h4>
<p>An <a href="https://en.wikipedia.org/wiki/Anycast"><strong>anycast</strong></a> address is a unicast IPv4 or IPv6 address that identifies a different host depending on where in the network it is used. This is accomplished by configuring Internet routers to advertise the same unicast routes from multiple locations in the Internet. Thus, <u>an anycast address refers not to a single host in the Internet, but to the "most appropriate" or "closest" single host that is responding to the anycast address.</u></p>
<p>Anycast addressing is used most frequently for finding a computer that provides a common service. For example, a datagram sent to an anycast address could be used to find a DNS server (<a href="../ch11/">Chapter 11</a>), a 6to4 gateway that encapsulates IPv6 traffic in IPv4 tunnels, or RPs for multicast routing.</p>
<h3 id="allocation">Allocation<a class="headerlink" href="#allocation" title="Permanent link">&para;</a></h3>
<h4 id="unicast">Unicast<a class="headerlink" href="#unicast" title="Permanent link">&para;</a></h4>
<h4 id="multicast">Multicast<a class="headerlink" href="#multicast" title="Permanent link">&para;</a></h4>
<h3 id="unicast-address-assignment">Unicast Address Assignment<a class="headerlink" href="#unicast-address-assignment" title="Permanent link">&para;</a></h3>
<h4 id="single-providerno-networksingle-address">Single Provider/No Network/Single Address<a class="headerlink" href="#single-providerno-networksingle-address" title="Permanent link">&para;</a></h4>
<h4 id="single-providersingle-networksingle-address">Single Provider/Single Network/Single Address<a class="headerlink" href="#single-providersingle-networksingle-address" title="Permanent link">&para;</a></h4>
<h4 id="single-providermultiple-networksmultiple-addresses">Single Provider/Multiple Networks/Multiple Addresses<a class="headerlink" href="#single-providermultiple-networksmultiple-addresses" title="Permanent link">&para;</a></h4>
<h4 id="multiple-providersmultiple-networksmultiple-addresses-multihoming">Multiple Providers/Multiple Networks/Multiple Addresses (Multihoming)<a class="headerlink" href="#multiple-providersmultiple-networksmultiple-addresses-multihoming" title="Permanent link">&para;</a></h4>
<h3 id="attacks-involving-ip-addresses">Attacks Involving IP Addresses<a class="headerlink" href="#attacks-involving-ip-addresses" title="Permanent link">&para;</a></h3>
            </div>
        </div>

        <footer class="col-md-12">
            
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../custom.js"></script>
    </body>
</html>